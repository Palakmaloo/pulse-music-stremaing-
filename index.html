<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pulse Music</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="style.css" />
</head>

<body class="bg-gray-950 text-white font-sans">
  <!-- Sidebar -->
  <nav class="fixed top-0 left-0 h-full w-48 bg-gray-900 p-4 shadow-lg z-30">
    <div class="flex </svg>items-center gap-2 mb-8">
      <img src="assets/logo.png" alt="Pulse Logo" class="w-14 h-14 rounded-full border-2 border-purple-500 shadow-lg" />
      <h1 class="text-xl font-bold text-purple-500">Pulse</h1>
    </div>
    <ul class="space-y-4 text-sm">
      <li><a href="#" class="hover:text-purple-400">Home</a></li>
      <li><a href="#" class="hover:text-purple-400">Browse</a></li>
      <li><a href="#" class="hover:text-purple-400">Podcasts</a></li>
      <li><a href="#" class="hover:text-purple-400">Library</a></li>
      <li><a href="#" class="hover:text-purple-400" onclick="togglePlaylist()">Playlists</a></li>
      <li><a href="#" class="hover:text-purple-400" onclick="openCreatePlaylistModal()">+ Create Playlist</a></li>
    </ul>
    <div id="playlist-container" class="mt-6 text-xs hidden">
      <h3 class="text-sm mb-2">Your Playlists</h3>
      <ul id="user-playlists" class="space-y-2"></ul>
    </div>
  </nav>

  <!-- Header -->
  <header class="fixed top-0 left-48 right-0 bg-gray-900 p-4 flex justify-between items-center shadow z-20">
    <h2 class="text-xl font-semibold text-purple-500">Welcome to Pulse</h2>
    <div class="flex gap-4">
      <button type="button" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-full shadow-md">Login / Sign Up</button>
    </div>
  </header>

  <!-- Main Content -->
  <main class="ml-48 pt-20 px-6 space-y-16">
    <!-- Hero -->
    <section class="text-center mt-10 relative">
      <img src="assets/music-bg.jpg" alt="Music Background" class="absolute inset-0 w-full h-full object-cover opacity-50" />
      <div class="relative z-10 py-32">
        <h1 class="text-6xl font-bold text-purple-400">Stream your favorite music and podcasts</h1>
        <p class="mt-6 text-lg text-gray-300 italic">Anytime, Anywhere.</p>
      </div>
    </section>

    <!-- Popular Artists -->
    <section>
      <h2 class="text-2xl font-semibold mb-4">Popular Artists</h2>
      <div class="grid grid-cols-3 md:grid-cols-5 gap-4">
        <div class="text-center">
          <img src="assets/latamangeshkar.png" class="rounded-full w-32 h-32 mx-auto" alt="Lata Mangeshkar" />
          <p class="mt-1">Lata Mangeshkar</p>
        </div>
        <div class="text-center">
          <img src="assets/album arijit.png" class="rounded-full w-32 h-32 mx-auto" alt="Arijit Singh" />
          <p class="mt-1">Arijit Singh</p>
        </div>
        <div class="text-center">
          <img src="assets/music-bg.jpg" class="rounded-full w-32 h-32 mx-auto" alt="ED Sheeran" />
          <p class="mt-1">Ed Sheeran</p>
        </div>
      </div>
    </section>

    <!-- Albums -->
    <section>
      <h2 class="text-2xl font-semibold mb-4">Albums</h2>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
        <div class="text-center">
          <img src="assets/album arijit.png" class="rounded w-40 h-40 mx-auto" alt="Arijit Album" />
          <p class="mt-2">Best of Arijit Singh</p>
        </div>
        <div class="text-center">
          <img src="assets/latamangeshkar.png" class="rounded w-40 h-40 mx-auto" alt="Lata Album" />
          <p class="mt-2">Best of Lata Mangeshkar</p>
        </div>
      </div>
    </section>

    <!-- Podcasts -->
    <section>
      <h2 class="text-2xl font-semibold mb-4">Podcasts</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="bg-gray-800 p-4 rounded-lg">
          <img src="assets/s.jaishankar.png" class="rounded w-full h-40 object-cover" alt="Podcast 1" />
          <h3 class="mt-2 text-lg font-semibold">Talk with Raj Shamani</h3>
          <p class="text-sm text-gray-400">Duration: 30 mins</p>
        </div>
        <div class="bg-gray-800 p-4 rounded-lg">
          <img src="assets/Screenshot 2025-05-06 080312.png" class="rounded w-full h-40 object-cover" alt="Podcast 2" />
          <h3 class="mt-2 text-lg font-semibold">Nikhil Kamath's Podcast</h3>
          <p class="text-sm text-gray-400">Duration: 30 mins</p>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer / Audio Player -->
  <footer class="fixed bottom-0 left-48 right-0 bg-gray-800 p-3 flex items-center justify-between z-20">
    <!-- Now Playing -->
    <div class="flex items-center gap-3 w-1/5">
      <img src="assets/latamangeshkar.png" alt="Now Playing" class="w-12 h-12 rounded-md" id="now-playing-cover" />
      <div class="text-xs">
      <strong id="now-playing-title" class="block">Not Playing</strong>
      <span id="now-playing-artist" class="text-gray-400">---</span>
      </div>
    </div>

    <!-- Playback Controls -->
    <div class="flex flex-col items-center w-3/5">
      <div class="flex items-center gap-4">
      <!-- Prev -->
      <span class="cursor-pointer text-white text-2xl" onclick="playPreviousTrack()">
        ⏮️
      </span>
      <!-- Play/Pause -->
      <span id="play-btn" class="flex items-center justify-center w-12 h-12 bg-purple-600 rounded-full cursor-pointer" onclick="togglePlayPause()">
        <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 16 16">
          <path d="M4.5 3.5v9l7-4.5-7-4.5z" />
        </svg>
        <svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-white hidden" fill="currentColor" viewBox="0 0 16 16">
          <path d="M5.5 3.5h2v9h-2v-9zm3 0h2v9h-2v-9z" />
        </svg>
      </span>
      </span>
        <!-- Next -->`
        <span class="cursor-pointer text-white text-2xl" onclick="playNextTrack()">⏭️
        </span>
      </div>

      <!-- Seek Bar -->
      <div class="flex items-center gap-2 mt-1 w-full">
        <span class="text-xs text-gray-400" id="current-time">0:00</span>
        <label for="seek-bar" class="sr-only">Seek Bar</label>
        <input id="seek-bar" type="range" min="0" max="100" value="0" class="w-full accent-purple-600" title="Seek through the track" />
        <span class="text-xs text-gray-400" id="total-duration">0:00</span>
      </div>
    </div>

    <!-- Volume -->
    <div class="flex items-center gap-3 w-1/5 justify-end">
      <button type="button" class="text-gray-400 hover:text-white text-lg" onclick="decreaseVolume()">-</button>
      <label for="volume-control" class="sr-only">Volume Control</label>
      <input id="volume-control" type="range" min="0" max="1" step="0.01" value="1" class="w-20 accent-purple-600" title="Adjust volume" />
      <button type="button" class="text-gray-400 hover:text-white text-lg" onclick="increaseVolume()">+</button>
    </div>

    <!-- Hidden Audio Element -->
    <audio id="audio-player" preload="none">
      <source id="audio-source" src="assets/lag_ja_gale.mp3" type="audio/mpeg">
      Your browser does not support audio.
    </audio>
  </footer>

  <!-- Create Playlist Modal -->
  <div id="create-playlist-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50">
    <div class="bg-gray-800 p-6 rounded-lg w-80">
      <h3 class="text-lg font-semibold mb-4">Create New Playlist</h3>
      <input type="text" id="new-playlist-name" class="w-full p-2 rounded bg-gray-700 text-white mb-4" placeholder="Playlist name" />
      <div class="flex justify-end gap-2">
        <button type="button" onclick="closeCreatePlaylistModal()" class="px-4 py-1 bg-gray-600 hover:bg-gray-700 rounded">Cancel</button>
        <button type="button" onclick="createPlaylist()" class="px-4 py-1 bg-green-600 hover:bg-green-700 rounded">Create</button>
      </div>
    </div>
  </div>

  <!-- Player Logic -->
  <script>
// Get references to the elements
const audio = document.getElementById("audio-player");

// Function to toggle play/pause
function togglePlayPause() {
  if (audio.paused) {
    audio.play(); // Play the audio
    playIcon.classList.add("hidden"); // Hide play icon
    pauseIcon.classList.remove("hidden"); // Show pause icon
  } else {
    audio.pause(); // Pause the audio
    playIcon.classList.remove("hidden"); // Show play icon
    pauseIcon.classList.add("hidden"); // Hide pause icon
  }
}

// Event listener to ensure the play/pause button reflects the current audio state
audio.addEventListener('play', () => {
  playIcon.classList.add("hidden");
  pauseIcon.classList.remove("hidden");
});

audio.addEventListener('pause', () => {
  playIcon.classList.remove("hidden");
  pauseIcon.classList.add("hidden");
});

// Optional: Auto-play next track when the current track ends
audio.addEventListener('ended', () => {
  playNextTrack();
});

// Add this to the existing player logic to ensure the audio is loaded and playable
window.addEventListener("DOMContentLoaded", () => {
  loadTrack(currentTrackIndex);  // Load the first track
  audio.load(); // Ensure the audio is loaded
});

    // src/components/Player.js

const playlist = [
  {
    title: "Lag Ja Gale",
    artist: "Lata Mangeshkar",
    src: "audio/lag-ja-gale.mp3",
    cover: "assets/latamangeshkar.png"
  },
  {
    title: "Tum Hi Ho",
    artist: "Arijit Singh",
    src: "audio/tum-hi-ho.mp3",
    cover: "assets/album arijit.png"
  },
  {
    title: "Perfect",
    artist: "Ed Sheeran",
    src: "audio/perfect_ed-sheeran.mp3",
    cover: "assets/music-bg.jpg"
  }
];


    let currentTrackIndex = 0;
    const audioSource = document.getElementById("audio-source");
    const playIcon = document.getElementById("play-icon");
    const pauseIcon = document.getElementById("pause-icon");
    const nowPlayingTitle = document.getElementById("now-playing-title");
    const nowPlayingArtist = document.getElementById("now-playing-artist");
    const seekBar = document.getElementById("seek-bar");
    const currentTimeEl = document.getElementById("current-time");
    const totalDurationEl = document.getElementById("total-duration");
    const volumeControl = document.getElementById("volume-control");

    function loadTrack(index) {
      const track = playlist[index];
      audioSource.src = track.src;
      audio.load();
      nowPlayingTitle.textContent = track.title;
      nowPlayingArtist.textContent = track.artist;
      document.querySelector("footer img").src = track.cover;
    }

    // Duplicate function removed to avoid conflicts

    function playNextTrack() {
      currentTrackIndex = (currentTrackIndex + 1) % playlist.length;
      loadTrack(currentTrackIndex);
      audio.play();
      pauseIcon.classList.remove("hidden");
      playIcon.classList.add("hidden");
    }

    function playPreviousTrack() {
      currentTrackIndex = (currentTrackIndex - 1 + playlist.length) % playlist.length;
      loadTrack(currentTrackIndex);
      audio.play();
      pauseIcon.classList.remove("hidden");
      playIcon.classList.add("hidden");
    }

    function formatTime(seconds) {
      const mins = Math.floor(seconds / 60);
      const secs = Math.floor(seconds % 60).toString().padStart(2, '0');
      return `${mins}:${secs}`;
    }

    audio.addEventListener("loadedmetadata", () => {
      totalDurationEl.textContent = formatTime(audio.duration);
      seekBar.max = Math.floor(audio.duration);
    });

    audio.addEventListener("timeupdate", () => {
      seekBar.value = Math.floor(audio.currentTime);
      currentTimeEl.textContent = formatTime(audio.currentTime);
    });

    seekBar.addEventListener("input", () => {
      audio.currentTime = seekBar.value;
    });

    volumeControl.addEventListener("input", () => {
      audio.volume = volumeControl.value;
    });

    function decreaseVolume() {
      volumeControl.value = Math.max(0, volumeControl.value - 0.1);
      audio.volume = volumeControl.value;
    }

    function increaseVolume() {
      volumeControl.value = Math.min(1, parseFloat(volumeControl.value) + 0.1);
      audio.volume = volumeControl.value;
    }

    function togglePlaylist() {
      const container = document.getElementById("playlist-container");
      container.classList.toggle("hidden");
    }

    function openCreatePlaylistModal() {
      document.getElementById("create-playlist-modal").classList.remove("hidden");
    }

    function closeCreatePlaylistModal() {
      document.getElementById("create-playlist-modal").classList.add("hidden");
    }

    document.querySelector(".bg-purple-600").addEventListener("click", () => {
      if (audio.paused) {
        loadTrack(currentTrackIndex); // Ensure the track is loaded
        audio.play(); // Play the audio
      }
    });
  </script>
  </script>
  <audio id="audio-player" src="http://localhost:3000/audio/lag-ja-gale.mp3"></audio>

</body>

</html>
